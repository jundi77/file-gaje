{"version":3,"sources":["profile.js"],"names":["define","$","Ajax","click","SELECTORS","show","removeClass","addClass","find","html","fname","val","lname","description","trim","city","country","M","util","get_string","focus","call","methodname","args","done","response","css","text","fail","ex","error","errorThrown","Notification","exception","asPieProgress","namespace"],"mappings":"AAAA,aAGAA,OAAO,CAAC,SAAU,YAAa,oBAAqB,mCAAoC,6BAA8B,SAAUC,EAAGC,GACjID,EAAE,mDAAmDE,MAAM,WACzD,IAAIC,EACK,oBADLA,EAEM,eAFNA,EAGO,gBAEXH,EAAEG,GAAiBC,OACnBJ,EAAEG,GAAiBE,YAAYF,GAAkBG,SAASH,GAC1DH,EAAEG,GAAiBI,KAAK,KAAKC,KAAK,aAClC,IAAIC,EAAQT,EAAE,eAAeU,MACzBC,EAAQX,EAAE,YAAYU,MAEtBE,EAAcZ,EAAEa,KAAKb,EAAE,gBAAgBU,OACvCI,EAAOd,EAAEa,KAAKb,EAAE,SAASU,OACzBK,EAAUf,EAAE,0DAA0DU,MAE1E,MAAc,KAAVD,GACFT,EAAEG,GAAiBC,OACnBJ,EAAEG,GAAiBE,YAAYF,GAAmBG,SAASH,GAC3DH,EAAEG,GAAiBI,KAAK,KAAKC,KAAKQ,EAAEC,KAAKC,WAAW,iBAAkB,gBACtElB,EAAE,eAAemB,SACV,GAGK,KAAVR,GACFX,EAAEG,GAAiBC,OACnBJ,EAAEG,GAAiBE,YAAYF,GAAmBG,SAASH,GAC3DH,EAAEG,GAAiBI,KAAK,KAAKC,KAAKQ,EAAEC,KAAKC,WAAW,gBAAiB,gBACrElB,EAAE,YAAYmB,SACP,QAQKlB,EAAKmB,KAAK,CAAC,CACvBC,WAAY,yCACZC,KAAM,CACJb,MAAOA,EACPE,MAAOA,EACPC,YAAaA,EACbE,KAAMA,EACNC,QAASA,MAET,GACIQ,KAAK,SAAUC,GACrBxB,EAAEG,GAAiBC,OACnBJ,EAAEG,GAAiBE,YAAYF,GAAkBG,SAASH,GAC1DH,EAAEG,GAAiBI,KAAK,KAAKkB,IAAI,SAAU,KAAKjB,KAAKQ,EAAEC,KAAKC,WAAW,2BAA4B,gBACnGlB,EAAE,iBAAiB0B,KAAKjB,EAAQ,IAAME,GACtCX,EAAE,6BAA6B0B,KAAKjB,EAAQ,IAAME,GAClDX,EAAE,qBAAqB0B,KAAKd,KAC3Be,KAAK,SAAUC,GAChB5B,EAAEG,GAAiBE,YAAYF,GAAmBG,SAASH,GAC3DH,EAAEG,GAAiBI,KAAK,KAAKkB,IAAI,SAAU,KAAKjB,KAAKqB,MAAQ,MAAQC,YAAc,KAAOd,EAAEC,KAAKC,WAAW,4BAA6B,gBACzIa,aAAaC,UAAUJ,OAI3B5B,EAAE,0BAA0BiC,cAAc,CACxCC,UAAW","sourcesContent":["/* jshint ignore:start */\ndefine(['jquery', 'core/ajax', 'core/notification', 'theme_remui/jquery-asPieProgress', 'theme_remui/aspieprogress'], function($, Ajax) {\n    $('#editprofile .form-horizontal #btn-save-changes').click(function() {\n        var SELECTORS = {\n            ERROR: 'div#error-message',\n            DANGER: 'alert-danger',\n            SUCCESS: 'alert-success'\n        };\n        $(SELECTORS.ERROR).show();\n        $(SELECTORS.ERROR).removeClass(SELECTORS.DANGER).addClass(SELECTORS.SUCCESS);\n        $(SELECTORS.ERROR).find('p').html(\"Saving...\");\n        var fname = $('#first_name').val();\n        var lname = $('#surname').val();\n        //var emailid = $('#standard_email').val();\n        var description = $.trim($('#description').val());\n        var city = $.trim($('#city').val());\n        var country = $('#editprofile .form-horizontal #country option:selected').val();\n\n        if (fname === '') {\n            $(SELECTORS.ERROR).show();\n            $(SELECTORS.ERROR).removeClass(SELECTORS.SUCCESS).addClass(SELECTORS.DANGER);\n            $(SELECTORS.ERROR).find('p').html(M.util.get_string('enterfirstname', 'theme_remui'));\n            $('#first_name').focus();\n            return false;\n        }\n        if (lname === '') {\n            $(SELECTORS.ERROR).show();\n            $(SELECTORS.ERROR).removeClass(SELECTORS.SUCCESS).addClass(SELECTORS.DANGER);\n            $(SELECTORS.ERROR).find('p').html(M.util.get_string('enterlastname', 'theme_remui'));\n            $('#surname').focus();\n            return false;\n        }\n\n        /*if (country === M.util.get_string('selectcountry', 'theme_remui')) {\n            countryname = '';\n            country = '';\n        }*/\n        var promise = Ajax.call([{\n            methodname: 'theme_remui_save_user_profile_settings',\n            args: {\n                fname,\n                lname,\n                description,\n                city,\n                country\n            }\n        }])[0];\n        promise.done(function(response) {\n            $(SELECTORS.ERROR).show();\n            $(SELECTORS.ERROR).removeClass(SELECTORS.DANGER).addClass(SELECTORS.SUCCESS);\n            $(SELECTORS.ERROR).find('p').css('margin', '0').html(M.util.get_string('detailssavedsuccessfully', 'theme_remui'));\n            $('.profile-user').text(fname + \" \" + lname);\n            $('.usermenu a span.usertext').text(fname + \" \" + lname);\n            $('#user-description').text(description);\n        })\n        .fail(function(ex) {\n            $(SELECTORS.ERROR).removeClass(SELECTORS.SUCCESS).addClass(SELECTORS.DANGER);\n            $(SELECTORS.ERROR).find('p').css('margin', '0').html(error + ' : ' + errorThrown + ', '+ M.util.get_string('actioncouldnotbeperformed', 'theme_remui'));\n            Notification.exception(ex);\n        });\n    });\n\n    // initiliaze coruse progress in profile\n    $('.remui-course-progress').asPieProgress({\n        namespace: 'asPieProgress'\n    });\n});\n/* jshint ignore:end */\n"],"file":"profile.min.js"}